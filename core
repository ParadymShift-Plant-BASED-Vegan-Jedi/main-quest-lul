$if[$message[1]==&&$getUserVar[reg]==undefined]
    $setUserVar[reg;1]
    $setUserVar[mqlvl;1]
    $setUserVar[mqxp;50]
    $setUserVar[mqtd;0]
    $setUserVar[mqtdm;0]
    $setUserVar[mqrd;false]
    $sendMessage[Congratulations, $nickname[$authorID]! 🎉😄👏👏 
You're now officially registered for Main Quest: Level Up Life! 
     
For a guide of all commands, use the following command:
     
!mq guide]
    $elseif[$message[1]==&&$getUserVar[reg]==1]
    $sendMessage[$nickname[$authorID] is already registered on Main Quest! 
     
Level: $getUserVar[mqlvl]
$if[$getUserVar[mqrd]==true]Current Streak: $getUserVar[mqrs]]$elseif[$getUserVar[mqrd]==false]Relapse defense is currently disabled. 

To enable relapse defense, simply use the following command:
!mq reldefense$endelseif$endIf]
    $endelseif
$endIf
$if[$message[1]==guide]
   $sendMessage[Here's a list of all Main Quest commands! 📜
   
`!mq`
Use this command to register or to come back to the MainQuest HQ!

`!mq guide`
Use this command to output this information again.

`!mq clocktower`
Use this command to check the time!

`!mq settime`
Use this command to set the time!

`!mq transday
Use this command to activate, deactivate, and set the transient daily!

!mq reldefense
Use this command to toggle Relapse Defense from active to inactive or visa versa.]
$endIf
$if[$message[1]==reldefense||$message[1]==reldef||$message[1]==rd]
    $if[$message[2]!=info]
        $sendMessage[$if[$getUserVar[mqrd]==false]Relapse Defense has now been activated! Your relapses and triggers will now be recordable; and, as you record them, they will be automatically tracked for you using razors-edge computational powers. 
    
For more Relapse Defense information, please use the following command:
!mq reldef info$elseIf[$getUserVar[mqrd]==undefined]You first need to register with Main Quest before you may activate the Relapse Defense by using the following command:
!mq$endelseif$elseIf[$getUserVar[mqrd]==true]You have now deactivated relapse defense.$endelseif$endIf]
        $if[$getUserVar[mqrd]==undefined]
            $stop
        $endIf
        $if[$getUserVar[mqrd]==true]
            $setUserVar[mqrd;false]
            $elseif[$getUserVar[mqrd]==false]
                $setUserVar[mqrd;true]
                $if[$getUserVar[mqtd]==0&&$getUserVar[mqtdm]==0]
                    $setUserVar[rdbegd;$formatDate[$dateStamp]]
                    $setUserVar[rdbegt;$if[$hour>12]$sum[$hour;-12]:$minute pm$elseIf[$hour<12]$hour:$minute am$endelseif$elseif[$hour==12]12:$minute pm$endelseif$endIf]
                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]]
                    $elseif[$sum[$getUserVar[mqtd];$hour]>-1&&$getUserVar[mqtdm]==0]
                        $if[$sum[$getUserVar[mqtd];$hour]>12]
                            $if[$sum[$getUserVar[mqtd];$hour]<24]
                                $if[[$getUserVar[mqtd]>14]
                                    $sendMessage[ERROR. Timezone does not exist. Please make sure that the clock tower is accurate!]
                                    $stop
                                $endif
                                $setUserVar[rdbegd;$formatDate[$dateStamp]]
                                $setUserVar[rdbegt;$sum[$getUserVar[mqtd];-12;$hour]:$minute pm]
                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                                $elseif[$sum[$getUserVar[mqtd];$hour]>24]
                                    $if[$sum[$getUserVar[mqtd];$hour]<36]
                                        $if[$month==September||$month==April||$month==June||$month==November&&$day==30]
                                            $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==September]October$elseif[$month==April]May$endelseif$elseif[$month==June]July$endelseif$elseif[$month==November]December$endelseif$endif $year]
                                            $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                            $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]]
                                            $elseif[$month==December&&$day==31]
                                                $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 January $sum[$year;1]]
                                                $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. A fresh year is a new opportunity to make this year awesome!]
                                            $endelseif
                                            $elseif[$month==January||$month==March||$month==May||$month==July||$month==August||$month==October&&$day==31]
                                                $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==January]February$elseif[$month==March]April$endelseif$elseif[$month==May]June$endelseif$elseif[$month==July]August$endelseif$elseif[$month==August]September$endelseif$elseif[$month==October]November$endelseif$endif $year]
                                                $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. $if[$month==March] No joke, the relapse tracker is properly running!$endif]
                                            $endelseif
                                            $elseif[$day==28||$day==29&&$month==February]
                                                $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 March $year]
                                                $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                                            $endelseif
                                        $endIf
                                        $elseif[$sum[$getUserVar[mqtd];$hour]==36]
                                            $if[$month==September||$month==April||$month==June||$month==November&&$day==30]
                                                $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==September]October$elseif[$month==April]May$endelseif$elseif[$month==June]July$endelseif$elseif[$month==November]December$endelseif$endif $year]
                                                $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]]
                                                $elseif[$month==December&&$day==31]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 January $sum[$year;1]]
                                                    $setUserVar[rdbegt;12:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. A fresh year is a new opportunity to make this year awesome!]
                                                $endelseif
                                                $elseif[$month==January||$month==March||$month==May||$month==July||$month==August||$month==October&&$day==31]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==January]February$elseif[$month==March]April$endelseif$elseif[$month==May]June$endelseif$elseif[$month==July]August$endelseif$elseif[$month==August]September$endelseif$elseif[$month==October]November$endelseif$endif $year]
                                                    $setUserVar[rdbegt;12:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. $if[$month==March] No joke, the relapse tracker is properly running!$endif]
                                                $endelseif
                                                $elseif[$day==28||$day==29&&$month==February]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 March $year]
                                                    $setUserVar[rdbegt;12:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                                                $endelseif
                                            $endIf
                                        $elseif[$sum[$getUserVar[mqtd];$hour]>36]
                                            $if[$month==September||$month==April||$month==June||$month==November&&$day==30]
                                                $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==September]October$elseif[$month==April]May$endelseif$elseif[$month==June]July$endelseif$elseif[$month==November]December$endelseif$endif $year]
                                                $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-24]:$minute am]
                                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]]
                                                $elseif[$month==December&&$day==31]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 January $sum[$year;1]]
                                                    $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-12]:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. A fresh year is a new opportunity to make this year awesome!]
                                                $endelseif
                                                $elseif[$month==January||$month==March||$month==May||$month==July||$month==August||$month==October&&$day==31]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 $if[$month==January]February$elseif[$month==March]April$endelseif$elseif[$month==May]June$endelseif$elseif[$month==July]August$endelseif$elseif[$month==August]September$endelseif$elseif[$month==October]November$endelseif$endif $year]
                                                    $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-12]:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt]. $if[$month==March] No joke, the relapse tracker is properly running!$endif]
                                                $endelseif
                                                $elseif[$day==28||$day==29&&$month==February]
                                                    $setUserVar[rdbegd;$if[$day[yes]==Monday]Tuesday$elseif[$day[yes]==Tuesday]Wednesday$endelseif$elseif[$day[yes]==Wednesday]Thursday$endelseif$elseif[$day[yes]==Thursday]Friday$endelseif$elseif[$day[yes]==Friday]Saturday$endelseif$elseif[$day[yes]==Saturday]Sunday$endelseif$elseif[$day[yes]==Sunday]Monday$endelseif$endif, 1 March $year]
                                                    $setUserVar[rdbegt;$sum[$hour;$getUserVar[mqtd];-12]:$minute pm]
                                                    $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                                                $endelseif
                                            $endIf
                                            /* taking a me break here */
                            $endIf
                            $elseIf[$sum[$getUserVar[mqtd];$hour]==12]
                                $if[$getUserVar[mqtd]>14]
                                    $sendMessage[ERROR. Timezone does not exist. Please make sure that the clock tower is accurate!]
                                    $stop
                                $endIf
                                $setUserVar[rdbegd;$formatDate[$dateStamp]]
                                $setUserVar[rdbegt;12:$minute pm]
                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                            $endelseIf
                            $elseIf[$sum[$getUserVar[mqtd];$hour]<12]
                                $if[$getUserVar[mqtd]>14]
                                    $sendMessage[ERROR. Timezone does not exist. Please make sure that the clock tower is accurate!]
                                    $stop
                                $endIf
                                $setUserVar[rdbegd;$formatDate[$dateStamp]]
                                $setUserVar[rdbegt;$sum[$getUserVar[mqtd];$hour]:$minute am]
                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                            $endelseif
                        $endIf
                    $endelseIf
                    $elseIf[$sum[$getUserVar[mqtd];$hour]<0&&$getUserVar[mqtdm]==0]
                        $if[$getUserVar[mqtd]<-10]
                            $sendMessage[ERROR. Timezone does not exist. Please make sure that the clock tower is accurate!]
                            $stop
                        $endIf
                        $if[$day==01]
                            $setUserVar[rdbegd;$if[$day[yes]==Friday]Thursday$elseif[$day[yes]==Saturday]Friday$endelseif$elseif[$day[yes]==Sunday]Saturday$endelseIf$elseif[$day[yes]==Monday]Sunday$endelseif$elseif[$day[yes]==Tuesday]Monday$endelseif$elseif[$day[yes]==Wednesday]Tuesday$endelseif$elseif[$day[yes]==Thursday]Wednesday$endelseif$endif, $if[$month==January]31 December$elseif[$month==February]31 January$elseif[$month==March]$if[$checkContains[$math[$year/4];.]==false]29 February$else 28 February$endif$endelseif$elseif[$month==April]31 March$endelseif$elseif[$month==May]30 April$endelseif$elseif[$month==June]31 May$endelseif$elseif[$month==July]30 June$endelseif$elseif[$month==August]31 July$endelseif$elseif[$month==September]31 August$endelseif$elseif[$month==October]30 September$endelseif$elseif[$month==November]31 October$endelseif$elseif[$month==December]30 November$endelseif$endif $if[$month==January]$sum[$year;-1]$elseif[$month!=January]$year$endelseif$endif]
                            $setUserVar[rdbegt;$sum[$getUserVar[mqtd];$hour;12]:$minute pm]
                            $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                            $else
                                $setUserVar[rdbegd;$if[$day[yes]==Friday]Thursday$elseif[$day[yes]==Saturday]Friday$endelseif$elseif[$day[yes]==Sunday]Saturday$endelseIf$elseif[$day[yes]==Monday]Sunday$endelseif$elseif[$day[yes]==Tuesday]Monday$endelseif$elseif[$day[yes]==Wednesday]Tuesday$endelseif$elseif[$day[yes]==Thursday]Wednesday$endelseif$endif, $sum[$day;-1] $month $year]
                                $setUserVar[rdbegt;$sum[$getUserVar[mqtd];$hour;12]:$minute pm]
                                $sendMessage[Relapse tracker has begun tracking at $getUserVar[rdbegd] $getUserVar[rdbegt].]
                        /* Decided to take a break here as I feel like I'm getting lost in the sauce. I wanna read from top to bottom to make sure that I haven't overlooked next day stuff for mqtd. */
                        
